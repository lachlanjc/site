---
import Color from './Color.astro';
import Socials from './Socials.astro';
import Project from './Project.astro';
import { getCollection, getEntry } from 'astro:content';

let allProjects = await getCollection('projects');
// sort by year, descending, then featured, true then false
allProjects = allProjects.sort((a, b) => {
  if (a.data.year > b.data.year) return -1;
  if (a.data.year < b.data.year) return 1;
  if (a.data.feat && !b.data.feat) return -1;
  if (!a.data.feat && b.data.feat) return 1;
  if (a.data.name < b.data.name) return -1;
  return 0;
});
---

<main class="container mx-auto max-w-4xl py-12 mb-24 md:px-4">
  <header class="px-4 md:px-0 font-triple">
    <Color />

    <span
      class="font-sans text-white bg-flame px-3 py-1 rounded-full -rotate-5 inline-block"
    >
      they/them
    </span>
    <h1
      class="text-7xl md:text-8xl font-bold text-(--active-hue) indent-[-.25ch] mt-2"
    >
      Lachlan Campbell
    </h1>
    <p class="my-6 text-xl/9 text-pretty">
    </p>
  </details>
	<Socials />
</header>

<section aria-label="Projects" class="grid gap-4 lg:gap-8 md:grid-cols-2">
{allProjects.map((project) => (
  <Project project={project} />
))}
</section>
</main>
